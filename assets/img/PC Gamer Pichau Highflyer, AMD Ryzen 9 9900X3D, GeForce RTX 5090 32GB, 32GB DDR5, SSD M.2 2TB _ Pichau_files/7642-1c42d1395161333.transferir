"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7642],{20482:(e,r,a)=>{a.d(r,{A:()=>l});let l=(0,a(12115).createContext)({})},29111:(e,r,a)=>{a.d(r,{default:()=>d});var l=a(95155),c=a(12115),t=a(6874),n=a.n(t),o=a(93456);let d=e=>{let{href:r,prefetch:a,children:t,...d}=e,i=(0,o.A)(),[f,u]=(0,c.useState)(null);return(0,l.jsx)(n(),{href:r,prefetch:!1,...d,onMouseEnter:()=>{u(setTimeout(()=>{i.prefetch(r)},1e3))},onMouseLeave:()=>{f&&(clearTimeout(f),u(null))},children:t})}},45179:(e,r,a)=>{a.d(r,{A:()=>l});function l(e){return async function(){for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return await e(...a).then(e=>{if(!e){var r,a,l;throw null==(l=window)||null==(a=l.location)||null==(r=a.reload)||r.call(a),Error("Ocorreu um erro inesperado, atualize a p\xe1gina e tente novamente.")}if(null==e?void 0:e.server_error)throw Error(null==e?void 0:e.server_error);return e})}}},52916:(e,r,a)=>{a.d(r,{ProviderWrapper:()=>I,As:()=>N,_$:()=>z,Pj:()=>O});var l=a(95155),c=a(12115);let t=(0,c.createContext)({});var n=a(34477);let o=(0,n.createServerReference)("7ffd36ebfc230e60ef12f6ae2c57478eb26155d796",n.callServer,void 0,n.findSourceMapURL,"fetchCart"),d=(0,n.createServerReference)("7faacd8b3238f86db9478b2f95688e77271a6fc1d0",n.callServer,void 0,n.findSourceMapURL,"applyOrRemoveCoupon"),i=(0,n.createServerReference)("7f0811998b2a0a36284f9c13dccb865845387f1b66",n.callServer,void 0,n.findSourceMapURL,"applyOrRemoveCouponAffiliate"),f=(0,n.createServerReference)("7f0ff1acc28beafc21068cd4c2bccb5bbf19ee5e45",n.callServer,void 0,n.findSourceMapURL,"deleteItemFromCart"),u=(0,n.createServerReference)("7ff55c1fe982b70b84de58232a5f4507a0f9cf48d6",n.callServer,void 0,n.findSourceMapURL,"updateItemFromCart"),v=(0,n.createServerReference)("7ffc53c29837bd9c9c44c1ddf17fa8e2253b4e4a4b",n.callServer,void 0,n.findSourceMapURL,"emptyCart"),s=(0,n.createServerReference)("7fccd808d228bfde58e263db047eb0c2fee715cba5",n.callServer,void 0,n.findSourceMapURL,"addToCart"),S=(0,n.createServerReference)("7fc3f95434a6e2f7c4e6c857b916d5ced0cddb83e2",n.callServer,void 0,n.findSourceMapURL,"setShippingMethod"),b=(0,n.createServerReference)("7f03d39cb8d4281af52995351a09e8112e770d55bd",n.callServer,void 0,n.findSourceMapURL,"setShippingMethodExtra"),h=(0,n.createServerReference)("7f00a3b84f0ab57005d837662f6f54e993be473b16",n.callServer,void 0,n.findSourceMapURL,"setShippingAddress"),p=(0,n.createServerReference)("7f218eaf42f7047aaa8b6c538f0bbc783725b771c7",n.callServer,void 0,n.findSourceMapURL,"setPaymentMethod"),R=(0,n.createServerReference)("7ff3f52bd7d0469f38e25292c6e1c975fcc3231c0c",n.callServer,void 0,n.findSourceMapURL,"applyStoreCredit"),m=(0,n.createServerReference)("7f3770060d32470ce25bc9d4a8084a02666dbfdb6b",n.callServer,void 0,n.findSourceMapURL,"removeStoreCredit"),g=(0,n.createServerReference)("7f573f18c429511ba18c590715496623b319b2e739",n.callServer,void 0,n.findSourceMapURL,"placeOrder");var M=a(45179);let C=e=>r=>y(r,e),y=(e,r)=>{let[a,l]=(0,c.useState)(),[t,n]=(0,c.useState)(!1);return[async function(){for(var a=arguments.length,c=Array(a),t=0;t<a;t++)c[t]=arguments[t];n(!0),(0,M.A)(e)(...c).then(e=>{r(e)}).catch(e=>l(e.message)).finally(()=>{n(!1)})},t,a,()=>{l(void 0),n(!1)}]};var A=a(62105);let U=e=>{var r;let{children:a,serverCartData:n}=e,{user:y}=N(),U=null==y?void 0:y.email,L=(0,c.useRef)(null),[x,w]=(0,c.useState)(null==n?void 0:n.cart),[E,k]=(0,c.useState)(!!(null==n?void 0:n.cart)),[P,_]=(0,c.useState)(null),[j,F]=(0,c.useState)(!1),[T,I]=(0,c.useState)(),[O,z]=(0,c.useState)(!1),[D,W]=(0,c.useState)(),$=C(w),[q,B,G,H]=$(o),[J,K,Q,V]=$(d),[X,Y,Z,ee]=$(i),[er,ea,el,ec]=$(S),[et,en,eo,ed]=$(b),[ei,ef,eu,ev]=$(h),[es,eS,eb,eh]=$(p),[ep,eR,em,eg]=$(R),[eM,eC,ey,eA]=$(m),[eU,eL,ex,ew]=$(f),[eE,ek,eP,e_]=$(u),[ej,eF,eT,eI]=$(v),eO=async(e,r)=>{await es(e),r&&r()},eN=(0,c.useCallback)(async(e,r)=>{z(!0),(0,M.A)(s)(e).then(e=>{w(e),r&&r()}).catch(e=>W(e.message)).finally(()=>z(!1))},[x]),ez=(0,c.useCallback)(async(e,r)=>{F(!0);try{var a,l;let c=await (0,M.A)(g)(e);_(null==c||null==(a=c.order)?void 0:a.order_id),F(!1),r.push("/success/".concat(null==c||null==(l=c.order)?void 0:l.order_id))}catch(e){if(A.Cp(e.message),e.message.includes("N\xe3o foi poss\xedvel criar o pedido")){let a=(e.message.match(/#([0-9]{10})*/g)||[""])[0].replace("#","");if(a)return r.push("/success"),q(),{order:{order_id:a}}}F(!1),I(e.message)}},[x]),eD=()=>{I(null),V(),W(null),H(),ec(),ed(),ev(),eh(),ew(),e_(),eI(),eg(),eA(),ee()},eW=(U||(null==x?void 0:x.email))&&U!==(null==x?void 0:x.email);(0,c.useEffect)(()=>{eW&&q(!0)},[eW]),(0,c.useEffect)(()=>{if(!L.current){var e;(null==n||null==(e=n.cart)?void 0:e.cartId)||setTimeout(()=>{q(!0)},1e3),L.current=!0}},[null==n||null==(r=n.cart)?void 0:r.cartId]),(0,c.useEffect)(()=>{k(!!x)},[x]);let e$={cart:x,loading:B||eF,error:G||D||Q||Z||ex||eP||eT,loaded:(!!x||!!(null==n?void 0:n.cart))&&!eF,fetchCart:q,cleanCartErrors:eD,addToCart:eN,isAdding:O,cartAddError:D,placeOrder:ez,isProcessingPlaceOrder:j,placeOrderError:T,orderPlaced:P,applyCoupon:J,isProcessingCoupon:K,couponError:Q,applyCouponAffiliate:X,isProcessingCouponAffiliate:Y,couponErrorAffiliate:Z,resetCart:()=>{w(null),k(!1),eD()},deleteItem:eU,isProcessingDeleteItem:eL,processingDeleteItemError:ex,updateItem:eE,isProcessingUpdateItem:ek,processingUpdateItemError:eP,emptyCart:ej,isProcessingEmptyCart:eF,processingEmptyCartError:eT,setShippingAddress:ei,isProcessingShippingAddress:ef,shippingAddressError:eu,setShippingMethod:er,setShippingMethodExtra:et,isProcessingShippingMethod:ea||en,shippingMethodError:el||eo,applyStoreCredit:ep,removeStoreCredit:eM,setPaymentMethod:eO,isProcessingPaymentMethod:eS||eR||eC,paymentMethodError:eb||em||ey};return(0,l.jsx)(t.Provider,{value:e$,children:a})};var L=a(76053);let x=e=>{let{children:r,serverStoreConfig:a}=e;return(0,l.jsx)(L.A.Provider,{value:a,children:r})};var w=a(20482);let E=(0,n.createServerReference)("7fa0202abe7a2516a0886e7c96a24e95cbcd17e147",n.callServer,void 0,n.findSourceMapURL,"login"),k=(0,n.createServerReference)("7f43585613fb21d2efa89bb128c68e18f88128eb32",n.callServer,void 0,n.findSourceMapURL,"createAccount"),P=(0,n.createServerReference)("7f8170e19777518f16dd4730b5e795739cee5c869d",n.callServer,void 0,n.findSourceMapURL,"fetchUserSession"),_=(0,n.createServerReference)("7fbf14759ee3e2ce7bb44fa550d783fa8ae95ba4d9",n.callServer,void 0,n.findSourceMapURL,"logout"),j=(0,n.createServerReference)("7f6f109f94c1961414d9643c3fc86968464b9be62e",n.callServer,void 0,n.findSourceMapURL,"addToFavorites"),F=(0,n.createServerReference)("7f0f5a89a07330f61a2fc4526cfca79fafb41d2215",n.callServer,void 0,n.findSourceMapURL,"removeFromFavorites"),T=e=>{var r;let{children:a,serverAuthConfig:t}=e,[n,o]=c.useState(!1),[d,i]=c.useState(!1),[f,u]=c.useState(!1),[v,s]=c.useState((null==t?void 0:t.user)||null),[S,b]=c.useState(null==t?void 0:t.favorites),[h,p]=c.useState(null),R=(0,c.useCallback)(async function(e,r,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o(!0);let t=await (0,M.A)(E)(e,r,a).catch(e=>{p(e.message),null==c||c()}).finally(()=>o(!1));(null==t?void 0:t.isAuth)&&(s(null==t?void 0:t.user),b(null==t?void 0:t.favorites),l&&l())},[]),m=(0,c.useCallback)(async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(!0);let l=await (0,M.A)(k)(e,r).catch(e=>{p(e.message)}).finally(()=>i(!1));(null==l?void 0:l.isAuth)&&(s(null==l?void 0:l.user),b(null==l?void 0:l.favorites),a&&a())},[]),g=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];o(e);let r=await P();r.isAuth&&(o(!1),s(null==r?void 0:r.user))},C={user:v,favorites:S,login:R,logout:(0,c.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(!0),await _(),s(null),o(!1),e&&e()},[]),orderPlaced:null,isAuth:!!(null==v?void 0:v.firstname),isCheckingAuth:!1,isCreatingUser:d,isLoadingUser:n,addToFavorites:(e,r)=>{u(!0),j(e,r).then(e=>e&&b(e)).finally(()=>u(!1))},removeFromFavorites:(e,r)=>{u(!0),F(e,r).then(e=>e&&b(e)).finally(()=>u(!1))},isUpdatingFavorites:f,createAccount:m,isTestingUser:(null==v||null==(r=v.email)?void 0:r.includes("pichau.com.br"))||(null==v?void 0:v.email)==="maycon@heerdt.com.br"||(null==v?void 0:v.email)==="gucamello@gmail.com",error:h,clearErrors:()=>p(null),setError:p,fetchUser:g};return(0,l.jsx)(w.A.Provider,{value:C,children:a})},I=e=>{let{children:r,storeConfig:a,userSession:c,serverCartData:t}=e;return(0,l.jsx)(x,{serverStoreConfig:a,children:(0,l.jsx)(T,{serverAuthConfig:c,children:(0,l.jsx)(U,{serverCartData:t,children:r})})})},O=()=>c.useContext(L.A),N=()=>c.useContext(w.A),z=()=>c.useContext(t)},76053:(e,r,a)=>{a.d(r,{A:()=>l});let l=(0,a(12115).createContext)({})},93456:(e,r,a)=>{a.d(r,{A:()=>l});let l=a(57372).rd}}]);